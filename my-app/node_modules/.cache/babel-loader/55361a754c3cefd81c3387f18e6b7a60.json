{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Result = exports.validationResult = void 0;\n\nconst _ = require(\"lodash\");\n\nconst base_1 = require(\"./base\");\n\nconst utils_1 = require(\"./utils\");\n\nexports.validationResult = Object.assign(withDefaults(), {\n  withDefaults\n});\n\nclass Result {\n  constructor(formatter, errors) {\n    this.formatter = formatter;\n    this.errors = errors;\n  }\n\n  array(options) {\n    return options && options.onlyFirstError ? Object.values(this.mapped()) : this.errors.map(this.formatter);\n  }\n\n  mapped() {\n    return this.errors.reduce((mapping, error) => {\n      if (!mapping[error.param]) {\n        mapping[error.param] = this.formatter(error);\n      }\n\n      return mapping;\n    }, {});\n  }\n\n  formatWith(formatter) {\n    return new Result(formatter, this.errors);\n  }\n\n  isEmpty() {\n    return this.errors.length === 0;\n  }\n\n  throw() {\n    if (!this.isEmpty()) {\n      throw Object.assign(new Error(), utils_1.bindAll(this));\n    }\n  }\n\n}\n\nexports.Result = Result;\n\nfunction withDefaults() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const defaults = {\n    formatter: error => error\n  };\n\n  const actualOptions = _.defaults(options, defaults);\n\n  return req => {\n    const contexts = req[base_1.contextsKey] || [];\n\n    const errors = _.flatMap(contexts, 'errors');\n\n    return new Result(actualOptions.formatter, errors);\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","Result","validationResult","_","require","base_1","utils_1","assign","withDefaults","constructor","formatter","errors","array","options","onlyFirstError","values","mapped","map","reduce","mapping","error","param","formatWith","isEmpty","length","throw","Error","bindAll","defaults","actualOptions","req","contexts","contextsKey","flatMap"],"sources":["E:/library/library_management/node_modules/express-validator/src/validation-result.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Result = exports.validationResult = void 0;\r\nconst _ = require(\"lodash\");\r\nconst base_1 = require(\"./base\");\r\nconst utils_1 = require(\"./utils\");\r\nexports.validationResult = Object.assign(withDefaults(), { withDefaults });\r\nclass Result {\r\n    constructor(formatter, errors) {\r\n        this.formatter = formatter;\r\n        this.errors = errors;\r\n    }\r\n    array(options) {\r\n        return options && options.onlyFirstError\r\n            ? Object.values(this.mapped())\r\n            : this.errors.map(this.formatter);\r\n    }\r\n    mapped() {\r\n        return this.errors.reduce((mapping, error) => {\r\n            if (!mapping[error.param]) {\r\n                mapping[error.param] = this.formatter(error);\r\n            }\r\n            return mapping;\r\n        }, {});\r\n    }\r\n    formatWith(formatter) {\r\n        return new Result(formatter, this.errors);\r\n    }\r\n    isEmpty() {\r\n        return this.errors.length === 0;\r\n    }\r\n    throw() {\r\n        if (!this.isEmpty()) {\r\n            throw Object.assign(new Error(), utils_1.bindAll(this));\r\n        }\r\n    }\r\n}\r\nexports.Result = Result;\r\nfunction withDefaults(options = {}) {\r\n    const defaults = {\r\n        formatter: error => error,\r\n    };\r\n    const actualOptions = _.defaults(options, defaults);\r\n    return (req) => {\r\n        const contexts = req[base_1.contextsKey] || [];\r\n        const errors = _.flatMap(contexts, 'errors');\r\n        return new Result(actualOptions.formatter, errors);\r\n    };\r\n}\r\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,MAAR,GAAiBF,OAAO,CAACG,gBAAR,GAA2B,KAAK,CAAjD;;AACA,MAAMC,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAjB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,SAAD,CAAvB;;AACAL,OAAO,CAACG,gBAAR,GAA2BL,MAAM,CAACU,MAAP,CAAcC,YAAY,EAA1B,EAA8B;EAAEA;AAAF,CAA9B,CAA3B;;AACA,MAAMP,MAAN,CAAa;EACTQ,WAAW,CAACC,SAAD,EAAYC,MAAZ,EAAoB;IAC3B,KAAKD,SAAL,GAAiBA,SAAjB;IACA,KAAKC,MAAL,GAAcA,MAAd;EACH;;EACDC,KAAK,CAACC,OAAD,EAAU;IACX,OAAOA,OAAO,IAAIA,OAAO,CAACC,cAAnB,GACDjB,MAAM,CAACkB,MAAP,CAAc,KAAKC,MAAL,EAAd,CADC,GAED,KAAKL,MAAL,CAAYM,GAAZ,CAAgB,KAAKP,SAArB,CAFN;EAGH;;EACDM,MAAM,GAAG;IACL,OAAO,KAAKL,MAAL,CAAYO,MAAZ,CAAmB,CAACC,OAAD,EAAUC,KAAV,KAAoB;MAC1C,IAAI,CAACD,OAAO,CAACC,KAAK,CAACC,KAAP,CAAZ,EAA2B;QACvBF,OAAO,CAACC,KAAK,CAACC,KAAP,CAAP,GAAuB,KAAKX,SAAL,CAAeU,KAAf,CAAvB;MACH;;MACD,OAAOD,OAAP;IACH,CALM,EAKJ,EALI,CAAP;EAMH;;EACDG,UAAU,CAACZ,SAAD,EAAY;IAClB,OAAO,IAAIT,MAAJ,CAAWS,SAAX,EAAsB,KAAKC,MAA3B,CAAP;EACH;;EACDY,OAAO,GAAG;IACN,OAAO,KAAKZ,MAAL,CAAYa,MAAZ,KAAuB,CAA9B;EACH;;EACDC,KAAK,GAAG;IACJ,IAAI,CAAC,KAAKF,OAAL,EAAL,EAAqB;MACjB,MAAM1B,MAAM,CAACU,MAAP,CAAc,IAAImB,KAAJ,EAAd,EAA2BpB,OAAO,CAACqB,OAAR,CAAgB,IAAhB,CAA3B,CAAN;IACH;EACJ;;AA5BQ;;AA8Bb5B,OAAO,CAACE,MAAR,GAAiBA,MAAjB;;AACA,SAASO,YAAT,GAAoC;EAAA,IAAdK,OAAc,uEAAJ,EAAI;EAChC,MAAMe,QAAQ,GAAG;IACblB,SAAS,EAAEU,KAAK,IAAIA;EADP,CAAjB;;EAGA,MAAMS,aAAa,GAAG1B,CAAC,CAACyB,QAAF,CAAWf,OAAX,EAAoBe,QAApB,CAAtB;;EACA,OAAQE,GAAD,IAAS;IACZ,MAAMC,QAAQ,GAAGD,GAAG,CAACzB,MAAM,CAAC2B,WAAR,CAAH,IAA2B,EAA5C;;IACA,MAAMrB,MAAM,GAAGR,CAAC,CAAC8B,OAAF,CAAUF,QAAV,EAAoB,QAApB,CAAf;;IACA,OAAO,IAAI9B,MAAJ,CAAW4B,aAAa,CAACnB,SAAzB,EAAoCC,MAApC,CAAP;EACH,CAJD;AAKH"},"metadata":{},"sourceType":"script"}